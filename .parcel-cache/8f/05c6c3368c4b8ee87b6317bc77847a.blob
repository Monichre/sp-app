var $ff7a80d6b0860d3faffb67ad73a2312$exports = {};
$parcel$require("7ff7a80d6b0860d3faffb67ad73a2312", "react");
$parcel$require("7ff7a80d6b0860d3faffb67ad73a2312", "./internal/SSRContext");
$parcel$require("7ff7a80d6b0860d3faffb67ad73a2312", "./utils");

function $ff7a80d6b0860d3faffb67ad73a2312$export$getMarkupFromTree(_ref) {
  var tree = _ref.tree,
      onBeforeRender = _ref.onBeforeRender,
      renderFunction = _ref.renderFunction;
  var ssrManager = $ff7a80d6b0860d3faffb67ad73a2312$import$createSSRManager();

  function process() {
    try {
      if (onBeforeRender) {
        onBeforeRender();
      }

      var html = renderFunction($ff7a80d6b0860d3faffb67ad73a2312$import$React.createElement($ff7a80d6b0860d3faffb67ad73a2312$import$SSRContext.Provider, {
        value: ssrManager
      }, tree));

      if (!ssrManager.hasPromises()) {
        return html;
      }
    } catch (e) {
      if (!$ff7a80d6b0860d3faffb67ad73a2312$import$isPromiseLike(e)) {
        throw e;
      }

      ssrManager.register(e);
    }

    return ssrManager.consumeAndAwaitPromises().then(process);
  }

  return Promise.resolve().then(process);
}

$ff7a80d6b0860d3faffb67ad73a2312$exports.getMarkupFromTree = $ff7a80d6b0860d3faffb67ad73a2312$export$getMarkupFromTree;