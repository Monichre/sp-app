var $a1f30ef1a863b4c765c51d2e21c$exports = {};
$parcel$require("64111a1f30ef1a863b4c765c51d2e21c", "react");
$parcel$require("64111a1f30ef1a863b4c765c51d2e21c", "./FirebaseContext");
$parcel$require("64111a1f30ef1a863b4c765c51d2e21c", "query-string");
$parcel$require("64111a1f30ef1a863b4c765c51d2e21c", "logrocket");

var $a1f30ef1a863b4c765c51d2e21c$export$CustomAuth = function CustomAuth(_ref) {
  var history = _ref.history,
      location = _ref.location;
  var customAccessToken = $a1f30ef1a863b4c765c51d2e21c$import$queryString.parse(location.search).customAccessToken;
  var auth = $a1f30ef1a863b4c765c51d2e21c$import$useFirebaseAuth();
  $a1f30ef1a863b4c765c51d2e21c$import$useEffect(function () {
    auth.signInWithCustomToken(customAccessToken).then(function (result) {
      console.log('logged in with custom token', result);

      if (result.user) {
        //@ts-ignore
        window.intercomSettings = {
          app_id: undefined // name: user.displayName || 'N/A', // Full name
          // email: user.email || 'N/A', // Email address
          // user_id: user.uid,
          // avatar: {
          //   "type": "avatar",
          //   "image_url": user.photoURL
          // }, // current_user_id
          // initialHarvestComplete,
          // lastUpdate

        }; //@ts-ignore

        FS.identify(result.user.uid, {
          displayName: result.user.displayName || 'N/A',
          email: result.user.email || 'N/A'
        });
        return $a1f30ef1a863b4c765c51d2e21c$import$LogRocket.identify(result.user.uid, {
          name: result.user.displayName || 'N/A',
          email: result.user.email || 'N/A'
        });
      }
    }).then(function () {
      history.replace('/');
    });
  });
  return $a1f30ef1a863b4c765c51d2e21c$import$React.createElement("h1", {
    style: {
      textAlign: 'center',
      marginTop: '3rem'
    }
  }, "Logging in with Spotify...");
};

$a1f30ef1a863b4c765c51d2e21c$exports.CustomAuth = $a1f30ef1a863b4c765c51d2e21c$export$CustomAuth;