var $f5d8810240de87c8786a8914c9f6a7f$exports = {};
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "react");
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "styled-components");
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "react-router-dom");
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "grommet-icons");
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "../../../shared/media");
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "../../../types");
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "../../../shared/Logo");
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "../../Components/UserAchievementsList");
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "../../../lib/suspensefulHook");
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "react-moment");
$parcel$require("0f5d8810240de87c8786a8914c9f6a7f", "./Authed");

function $f5d8810240de87c8786a8914c9f6a7f$var$_toConsumableArray(arr) { return $f5d8810240de87c8786a8914c9f6a7f$var$_arrayWithoutHoles(arr) || $f5d8810240de87c8786a8914c9f6a7f$var$_iterableToArray(arr) || $f5d8810240de87c8786a8914c9f6a7f$var$_nonIterableSpread(); }

function $f5d8810240de87c8786a8914c9f6a7f$var$_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function $f5d8810240de87c8786a8914c9f6a7f$var$_iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function $f5d8810240de87c8786a8914c9f6a7f$var$_arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function $f5d8810240de87c8786a8914c9f6a7f$var$_slicedToArray(arr, i) { return $f5d8810240de87c8786a8914c9f6a7f$var$_arrayWithHoles(arr) || $f5d8810240de87c8786a8914c9f6a7f$var$_iterableToArrayLimit(arr, i) || $f5d8810240de87c8786a8914c9f6a7f$var$_nonIterableRest(); }

function $f5d8810240de87c8786a8914c9f6a7f$var$_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function $f5d8810240de87c8786a8914c9f6a7f$var$_iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === "[object Arguments]")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function $f5d8810240de87c8786a8914c9f6a7f$var$_arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function $f5d8810240de87c8786a8914c9f6a7f$var$_objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = $f5d8810240de87c8786a8914c9f6a7f$var$_objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function $f5d8810240de87c8786a8914c9f6a7f$var$_objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject8() {
  var data = $f5d8810240de87c8786a8914c9f6a7f$var$_taggedTemplateLiteral(["\nmargin: 2rem 0rem;\npadding: 1rem;\nbackground-color: #AAA;\ncolor: #030616;\n"]);

  $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject8 = function _templateObject8() {
    return data;
  };

  return data;
}

function $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject7() {
  var data = $f5d8810240de87c8786a8914c9f6a7f$var$_taggedTemplateLiteral(["\n  padding: 1rem;\n  color: #888;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n  text-align: center;\n  font-size: 0.8rem;\n"]);

  $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject7 = function _templateObject7() {
    return data;
  };

  return data;
}

function $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject6() {
  var data = $f5d8810240de87c8786a8914c9f6a7f$var$_taggedTemplateLiteral(["\n  flex: 100;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  padding: 1.5rem;\n  align-items: center;\n"]);

  $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject6 = function _templateObject6() {
    return data;
  };

  return data;
}

function $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject5() {
  var data = $f5d8810240de87c8786a8914c9f6a7f$var$_taggedTemplateLiteral(["\n  text-align: center;\n  padding: 1rem 0rem;\n  flex: 1;\n  flex-direction: column;\n  text-transform: uppercase;\n\n  &.active {\n    ", " {\n      display: block;\n    }\n    border-top: 0.5rem solid ", ";\n    padding-top: 0.5rem;\n  }\n  svg {\n    margin-bottom: 0.5rem;\n  }\n\n \n\n"]);

  $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject5 = function _templateObject5() {
    return data;
  };

  return data;
}

function $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject4() {
  var data = $f5d8810240de87c8786a8914c9f6a7f$var$_taggedTemplateLiteral(["\n  text-align: right;\n  width: 100%;\n  padding: .5rem;\n  font-size: 1.25rem;\n  flex-direction: row-reverse;\n  align-items: center;\n  display: flex;\n\n  &.active {\n    border-right: 0.5rem solid ", ";\n    padding-right: 1.5rem;\n  }\n\n  svg {\n    margin-left: 0.5rem;\n  }\n"]);

  $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject4 = function _templateObject4() {
    return data;
  };

  return data;
}

function $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject3() {
  var data = $f5d8810240de87c8786a8914c9f6a7f$var$_taggedTemplateLiteral(["\ntext-decoration: none;\n&:hover {\n  color: ", ";\n  svg {\n    stroke: ", ";\n  }\n}\n&.active {\n  background-color: rgba(216, 216, 216, .05);\n\n  color: ", ";\n\n  svg {\n    stroke: ", ";\n  }\n}\n", "\n", "\n"]);

  $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject3 = function _templateObject3() {
    return data;
  };

  return data;
}

function $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject2() {
  var data = $f5d8810240de87c8786a8914c9f6a7f$var$_taggedTemplateLiteral(["\nbackground-color: #030616;\nz-index: 20;\n"]);

  $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject2 = function _templateObject2() {
    return data;
  };

  return data;
}

function $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject() {
  var data = $f5d8810240de87c8786a8914c9f6a7f$var$_taggedTemplateLiteral(["\npadding: 10px;\n"]);

  $f5d8810240de87c8786a8914c9f6a7f$var$_templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function $f5d8810240de87c8786a8914c9f6a7f$var$_taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

var $f5d8810240de87c8786a8914c9f6a7f$export$NavLabel = $f5d8810240de87c8786a8914c9f6a7f$import$styled.div($f5d8810240de87c8786a8914c9f6a7f$var$_templateObject());
$f5d8810240de87c8786a8914c9f6a7f$exports.NavLabel = $f5d8810240de87c8786a8914c9f6a7f$export$NavLabel;
var $f5d8810240de87c8786a8914c9f6a7f$export$NavMenuView = $f5d8810240de87c8786a8914c9f6a7f$import$styled.div($f5d8810240de87c8786a8914c9f6a7f$var$_templateObject2());
$f5d8810240de87c8786a8914c9f6a7f$exports.NavMenuView = $f5d8810240de87c8786a8914c9f6a7f$export$NavMenuView;
var $f5d8810240de87c8786a8914c9f6a7f$export$NavPrimaryLink = $f5d8810240de87c8786a8914c9f6a7f$import$styled($f5d8810240de87c8786a8914c9f6a7f$import$NavLink)($f5d8810240de87c8786a8914c9f6a7f$var$_templateObject3(), $f5d8810240de87c8786a8914c9f6a7f$import$BRAND_COLOR, $f5d8810240de87c8786a8914c9f6a7f$import$BRAND_COLOR, $f5d8810240de87c8786a8914c9f6a7f$import$BRAND_COLOR, $f5d8810240de87c8786a8914c9f6a7f$import$BRAND_COLOR, $f5d8810240de87c8786a8914c9f6a7f$import$largeQuery($f5d8810240de87c8786a8914c9f6a7f$var$_templateObject4(), $f5d8810240de87c8786a8914c9f6a7f$import$BRAND_COLOR), $f5d8810240de87c8786a8914c9f6a7f$import$notLargeQuery($f5d8810240de87c8786a8914c9f6a7f$var$_templateObject5(), $f5d8810240de87c8786a8914c9f6a7f$export$NavLabel, $f5d8810240de87c8786a8914c9f6a7f$import$BRAND_PERSONAL_COLOR));
$f5d8810240de87c8786a8914c9f6a7f$exports.NavPrimaryLink = $f5d8810240de87c8786a8914c9f6a7f$export$NavPrimaryLink;
var $f5d8810240de87c8786a8914c9f6a7f$var$FillSpace = $f5d8810240de87c8786a8914c9f6a7f$import$styled.div($f5d8810240de87c8786a8914c9f6a7f$var$_templateObject6());
var $f5d8810240de87c8786a8914c9f6a7f$var$LastUpdateDiv = $f5d8810240de87c8786a8914c9f6a7f$import$styled.div($f5d8810240de87c8786a8914c9f6a7f$var$_templateObject7());

var $f5d8810240de87c8786a8914c9f6a7f$var$LastUpdate = function LastUpdate(_ref) {
  var lastUpdate = _ref.lastUpdate;
  return $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$var$LastUpdateDiv, null, $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement("div", null, "last updated"), $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement("div", null, $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$import$Moment, {
    fromNow: true
  }, lastUpdate)));
};

var $f5d8810240de87c8786a8914c9f6a7f$var$HarvestingNoticeDiv = $f5d8810240de87c8786a8914c9f6a7f$import$styled.div($f5d8810240de87c8786a8914c9f6a7f$var$_templateObject8());

var $f5d8810240de87c8786a8914c9f6a7f$var$HarvestingNotice = function HarvestingNotice() {
  return $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$var$HarvestingNoticeDiv, null, "Watch your stats grow as we complete your initial harvest.");
};

var $f5d8810240de87c8786a8914c9f6a7f$export$NavMenu = function NavMenu(_ref2) {
  var initialHarvestComplete = _ref2.initialHarvestComplete,
      lastUpdate = _ref2.lastUpdate,
      user = _ref2.user,
      rest = $f5d8810240de87c8786a8914c9f6a7f$var$_objectWithoutProperties(_ref2, ["initialHarvestComplete", "lastUpdate", "user"]);

  // Local State
  var _useState = $f5d8810240de87c8786a8914c9f6a7f$import$useState(false),
      _useState2 = $f5d8810240de87c8786a8914c9f6a7f$var$_slicedToArray(_useState, 2),
      topArtistByPeriodData = _useState2[0],
      setTopArtistByPeriodData = _useState2[1]; // Context Props 


  var _useContext = $f5d8810240de87c8786a8914c9f6a7f$import$useContext($f5d8810240de87c8786a8914c9f6a7f$import$UserAchievementContext),
      setTopArtistsWithAchievementHolders = _useContext.setTopArtistsWithAchievementHolders,
      topArtistsWithAchievementHolders = _useContext.topArtistsWithAchievementHolders,
      achievements = _useContext.achievements; // Vars 


  var uid = user.uid;
  var history = rest.history,
      match = rest.match;
  var pathname = history.location.pathname; // Hooks 

  var _suspensefulPollingHo = $f5d8810240de87c8786a8914c9f6a7f$import$suspensefulPollingHook(true, $f5d8810240de87c8786a8914c9f6a7f$import$useInsightsArtists({
    variables: {
      uid: uid
    },
    suspend: true,
    pollInterval: 1000
  })),
      usersTopArtistByPeriodData = _suspensefulPollingHo.insightsArtists;

  console.log('TCL: usersTopArtistByPeriodData', usersTopArtistByPeriodData);
  var topByPeriod = Object.assign({}, usersTopArtistByPeriodData);
  var artists = [];

  for (var period in topByPeriod) {
    if (topByPeriod[period].personal) {
      topByPeriod[period].personal.forEach(function (_ref3) {
        var artist = _ref3.artist;
        return artists.push(artist);
      });
    }

    if (topByPeriod[period].group) {
      topByPeriod[period].group.forEach(function (_ref4) {
        var artist = _ref4.artist;
        return artists.push(artist);
      });
    }
  } // console.log('TCL: personal and group artists', artists)
  // @ts-ignore


  artists = $f5d8810240de87c8786a8914c9f6a7f$var$_toConsumableArray(new Set(artists));
  console.log('TCL: artists', artists);

  var _suspensefulHook = $f5d8810240de87c8786a8914c9f6a7f$import$suspensefulHook($f5d8810240de87c8786a8914c9f6a7f$import$useGetTopArtistAchievementHolders({
    variables: {
      perspectiveUID: 'global',
      artistIds: artists.map(function (artist) {
        return artist.id;
      })
    },
    suspend: true
  })),
      _suspensefulHook$getT = _suspensefulHook.getTopArtistAchievementHolders,
      getTopArtistAchievementHolders = _suspensefulHook$getT === void 0 ? null : _suspensefulHook$getT;

  var ahWithArtist = getTopArtistAchievementHolders ? getTopArtistAchievementHolders.map(function (_ref5) {
    var artistId = _ref5.artistId,
        achievementHolders = _ref5.achievementHolders;
    return {
      achievementHolders: achievementHolders,
      artist: artists.find(function (artist) {
        return artist.id === artistId;
      })
    };
  }) : null;
  console.log('TCL: ahWithArtist', ahWithArtist);
  $f5d8810240de87c8786a8914c9f6a7f$import$useEffect(function () {
    setTopArtistsWithAchievementHolders(ahWithArtist); // Sets the App's Larger Data Context with Top Artists and their respective Top Listeners or Achievement Holders
  }, [usersTopArtistByPeriodData]);
  $f5d8810240de87c8786a8914c9f6a7f$import$useEffect(function () {
    setTopArtistByPeriodData(usersTopArtistByPeriodData); // Sets the current users achievements based on the data from line #159 - useGetTopArtistAchievementHolders
  }, [achievements]);
  return $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$export$NavMenuView, null, $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$export$NavPrimaryLink, {
    to: "/insights"
  }, $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$import$LineChart, {
    color: "white"
  }), $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$export$NavLabel, null, "Insights")), $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$export$NavPrimaryLink, {
    to: "/history"
  }, $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$import$History, {
    color: "white"
  }), $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$export$NavLabel, null, "History")), $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$export$NavPrimaryLink, {
    to: "/profile"
  }, $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$import$User, {
    color: "white"
  }), $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$export$NavLabel, null, "Profile")), topArtistByPeriodData ? $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$import$UserAchievementsList, {
    userId: user.uid,
    usersTopArtistByPeriodData: topArtistByPeriodData
  }) : null, $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$import$Large, null, $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$var$FillSpace, null, !initialHarvestComplete ? $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$var$HarvestingNotice, null) : $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$var$LastUpdate, {
    lastUpdate: lastUpdate
  }), $f5d8810240de87c8786a8914c9f6a7f$import$React.createElement($f5d8810240de87c8786a8914c9f6a7f$import$LogoHorizontal, {
    size: 8
  }))));
};

$f5d8810240de87c8786a8914c9f6a7f$exports.NavMenu = $f5d8810240de87c8786a8914c9f6a7f$export$NavMenu;