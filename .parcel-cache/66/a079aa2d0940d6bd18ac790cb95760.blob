var $eb560e8d67b66860b41c8879d4566331$exports = {};
$parcel$require("eb560e8d67b66860b41c8879d4566331", "graphql/language/printer");
$parcel$require("eb560e8d67b66860b41c8879d4566331", "./utils");

function $eb560e8d67b66860b41c8879d4566331$var$_objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

var $eb560e8d67b66860b41c8879d4566331$var$cachedQueriesByClient = new WeakMap();

function $eb560e8d67b66860b41c8879d4566331$export$getCachedObservableQuery(client, options) {
  var queriesForClient = $eb560e8d67b66860b41c8879d4566331$var$getCachedQueriesForClient(client);
  var cacheKey = $eb560e8d67b66860b41c8879d4566331$var$getCacheKey(options);
  var observableQuery = queriesForClient.get(cacheKey);

  if (observableQuery == null) {
    observableQuery = client.watchQuery(options);
    queriesForClient.set(cacheKey, observableQuery);
  }

  return observableQuery;
}

$eb560e8d67b66860b41c8879d4566331$exports.getCachedObservableQuery = $eb560e8d67b66860b41c8879d4566331$export$getCachedObservableQuery;

function $eb560e8d67b66860b41c8879d4566331$export$invalidateCachedObservableQuery(client, options) {
  var queriesForClient = $eb560e8d67b66860b41c8879d4566331$var$getCachedQueriesForClient(client);
  var cacheKey = $eb560e8d67b66860b41c8879d4566331$var$getCacheKey(options);
  queriesForClient.delete(cacheKey);
}

$eb560e8d67b66860b41c8879d4566331$exports.invalidateCachedObservableQuery = $eb560e8d67b66860b41c8879d4566331$export$invalidateCachedObservableQuery;

function $eb560e8d67b66860b41c8879d4566331$var$getCachedQueriesForClient(client) {
  var queriesForClient = $eb560e8d67b66860b41c8879d4566331$var$cachedQueriesByClient.get(client);

  if (queriesForClient == null) {
    queriesForClient = new Map();
    $eb560e8d67b66860b41c8879d4566331$var$cachedQueriesByClient.set(client, queriesForClient);
  }

  return queriesForClient;
}

function $eb560e8d67b66860b41c8879d4566331$var$getCacheKey(_ref) {
  var query = _ref.query,
      options = $eb560e8d67b66860b41c8879d4566331$var$_objectWithoutPropertiesLoose(_ref, ["query"]);
  return $eb560e8d67b66860b41c8879d4566331$import$print(query) + "@@" + $eb560e8d67b66860b41c8879d4566331$import$objToKey(options);
}