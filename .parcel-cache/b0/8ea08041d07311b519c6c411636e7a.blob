var $fbbeb14ad89251edfb9e278022a044$exports = {};
var $fbbeb14ad89251edfb9e278022a044$var$whitespace = $parcel$require("75fbbeb14ad89251edfb9e278022a044", "is-whitespace-character");
var $fbbeb14ad89251edfb9e278022a044$var$normalize = $parcel$require("75fbbeb14ad89251edfb9e278022a044", "../util/normalize");
$fbbeb14ad89251edfb9e278022a044$exports = $fbbeb14ad89251edfb9e278022a044$var$definition;
$fbbeb14ad89251edfb9e278022a044$var$definition.notInList = true;
$fbbeb14ad89251edfb9e278022a044$var$definition.notInBlock = true;
var $fbbeb14ad89251edfb9e278022a044$var$C_DOUBLE_QUOTE = '"';
var $fbbeb14ad89251edfb9e278022a044$var$C_SINGLE_QUOTE = '\'';
var $fbbeb14ad89251edfb9e278022a044$var$C_BACKSLASH = '\\';
var $fbbeb14ad89251edfb9e278022a044$var$C_NEWLINE = '\n';
var $fbbeb14ad89251edfb9e278022a044$var$C_TAB = '\t';
var $fbbeb14ad89251edfb9e278022a044$var$C_SPACE = ' ';
var $fbbeb14ad89251edfb9e278022a044$var$C_BRACKET_OPEN = '[';
var $fbbeb14ad89251edfb9e278022a044$var$C_BRACKET_CLOSE = ']';
var $fbbeb14ad89251edfb9e278022a044$var$C_PAREN_OPEN = '(';
var $fbbeb14ad89251edfb9e278022a044$var$C_PAREN_CLOSE = ')';
var $fbbeb14ad89251edfb9e278022a044$var$C_COLON = ':';
var $fbbeb14ad89251edfb9e278022a044$var$C_LT = '<';
var $fbbeb14ad89251edfb9e278022a044$var$C_GT = '>';

function $fbbeb14ad89251edfb9e278022a044$var$definition(eat, value, silent) {
  var self = this;
  var commonmark = self.options.commonmark;
  var index = 0;
  var length = value.length;
  var subvalue = '';
  var beforeURL;
  var beforeTitle;
  var queue;
  var character;
  var test;
  var identifier;
  var url;
  var title;

  while (index < length) {
    character = value.charAt(index);

    if (character !== $fbbeb14ad89251edfb9e278022a044$var$C_SPACE && character !== $fbbeb14ad89251edfb9e278022a044$var$C_TAB) {
      break;
    }

    subvalue += character;
    index++;
  }

  character = value.charAt(index);

  if (character !== $fbbeb14ad89251edfb9e278022a044$var$C_BRACKET_OPEN) {
    return;
  }

  index++;
  subvalue += character;
  queue = '';

  while (index < length) {
    character = value.charAt(index);

    if (character === $fbbeb14ad89251edfb9e278022a044$var$C_BRACKET_CLOSE) {
      break;
    } else if (character === $fbbeb14ad89251edfb9e278022a044$var$C_BACKSLASH) {
      queue += character;
      index++;
      character = value.charAt(index);
    }

    queue += character;
    index++;
  }

  if (!queue || value.charAt(index) !== $fbbeb14ad89251edfb9e278022a044$var$C_BRACKET_CLOSE || value.charAt(index + 1) !== $fbbeb14ad89251edfb9e278022a044$var$C_COLON) {
    return;
  }

  identifier = queue;
  subvalue += queue + $fbbeb14ad89251edfb9e278022a044$var$C_BRACKET_CLOSE + $fbbeb14ad89251edfb9e278022a044$var$C_COLON;
  index = subvalue.length;
  queue = '';

  while (index < length) {
    character = value.charAt(index);

    if (character !== $fbbeb14ad89251edfb9e278022a044$var$C_TAB && character !== $fbbeb14ad89251edfb9e278022a044$var$C_SPACE && character !== $fbbeb14ad89251edfb9e278022a044$var$C_NEWLINE) {
      break;
    }

    subvalue += character;
    index++;
  }

  character = value.charAt(index);
  queue = '';
  beforeURL = subvalue;

  if (character === $fbbeb14ad89251edfb9e278022a044$var$C_LT) {
    index++;

    while (index < length) {
      character = value.charAt(index);

      if (!$fbbeb14ad89251edfb9e278022a044$var$isEnclosedURLCharacter(character)) {
        break;
      }

      queue += character;
      index++;
    }

    character = value.charAt(index);

    if (character === $fbbeb14ad89251edfb9e278022a044$var$isEnclosedURLCharacter.delimiter) {
      subvalue += $fbbeb14ad89251edfb9e278022a044$var$C_LT + queue + character;
      index++;
    } else {
      if (commonmark) {
        return;
      }

      index -= queue.length + 1;
      queue = '';
    }
  }

  if (!queue) {
    while (index < length) {
      character = value.charAt(index);

      if (!$fbbeb14ad89251edfb9e278022a044$var$isUnclosedURLCharacter(character)) {
        break;
      }

      queue += character;
      index++;
    }

    subvalue += queue;
  }

  if (!queue) {
    return;
  }

  url = queue;
  queue = '';

  while (index < length) {
    character = value.charAt(index);

    if (character !== $fbbeb14ad89251edfb9e278022a044$var$C_TAB && character !== $fbbeb14ad89251edfb9e278022a044$var$C_SPACE && character !== $fbbeb14ad89251edfb9e278022a044$var$C_NEWLINE) {
      break;
    }

    queue += character;
    index++;
  }

  character = value.charAt(index);
  test = null;

  if (character === $fbbeb14ad89251edfb9e278022a044$var$C_DOUBLE_QUOTE) {
    test = $fbbeb14ad89251edfb9e278022a044$var$C_DOUBLE_QUOTE;
  } else if (character === $fbbeb14ad89251edfb9e278022a044$var$C_SINGLE_QUOTE) {
    test = $fbbeb14ad89251edfb9e278022a044$var$C_SINGLE_QUOTE;
  } else if (character === $fbbeb14ad89251edfb9e278022a044$var$C_PAREN_OPEN) {
    test = $fbbeb14ad89251edfb9e278022a044$var$C_PAREN_CLOSE;
  }

  if (!test) {
    queue = '';
    index = subvalue.length;
  } else if (queue) {
    subvalue += queue + character;
    index = subvalue.length;
    queue = '';

    while (index < length) {
      character = value.charAt(index);

      if (character === test) {
        break;
      }

      if (character === $fbbeb14ad89251edfb9e278022a044$var$C_NEWLINE) {
        index++;
        character = value.charAt(index);

        if (character === $fbbeb14ad89251edfb9e278022a044$var$C_NEWLINE || character === test) {
          return;
        }

        queue += $fbbeb14ad89251edfb9e278022a044$var$C_NEWLINE;
      }

      queue += character;
      index++;
    }

    character = value.charAt(index);

    if (character !== test) {
      return;
    }

    beforeTitle = subvalue;
    subvalue += queue + character;
    index++;
    title = queue;
    queue = '';
  } else {
    return;
  }

  while (index < length) {
    character = value.charAt(index);

    if (character !== $fbbeb14ad89251edfb9e278022a044$var$C_TAB && character !== $fbbeb14ad89251edfb9e278022a044$var$C_SPACE) {
      break;
    }

    subvalue += character;
    index++;
  }

  character = value.charAt(index);

  if (!character || character === $fbbeb14ad89251edfb9e278022a044$var$C_NEWLINE) {
    if (silent) {
      return true;
    }

    beforeURL = eat(beforeURL).test().end;
    url = self.decode.raw(self.unescape(url), beforeURL, {
      nonTerminated: false
    });

    if (title) {
      beforeTitle = eat(beforeTitle).test().end;
      title = self.decode.raw(self.unescape(title), beforeTitle);
    }

    return eat(subvalue)({
      type: 'definition',
      identifier: $fbbeb14ad89251edfb9e278022a044$var$normalize(identifier),
      title: title || null,
      url: url
    });
  }
}
/* Check if `character` can be inside an enclosed URI. */


function $fbbeb14ad89251edfb9e278022a044$var$isEnclosedURLCharacter(character) {
  return character !== $fbbeb14ad89251edfb9e278022a044$var$C_GT && character !== $fbbeb14ad89251edfb9e278022a044$var$C_BRACKET_OPEN && character !== $fbbeb14ad89251edfb9e278022a044$var$C_BRACKET_CLOSE;
}

$fbbeb14ad89251edfb9e278022a044$var$isEnclosedURLCharacter.delimiter = $fbbeb14ad89251edfb9e278022a044$var$C_GT;
/* Check if `character` can be inside an unclosed URI. */

function $fbbeb14ad89251edfb9e278022a044$var$isUnclosedURLCharacter(character) {
  return character !== $fbbeb14ad89251edfb9e278022a044$var$C_BRACKET_OPEN && character !== $fbbeb14ad89251edfb9e278022a044$var$C_BRACKET_CLOSE && !$fbbeb14ad89251edfb9e278022a044$var$whitespace(character);
}