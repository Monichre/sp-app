var $bff759400452e31cd08f2b9fa928f56a$exports = {};
$parcel$require("bff759400452e31cd08f2b9fa928f56a", "zen-observable-ts");
$parcel$require("bff759400452e31cd08f2b9fa928f56a", "zen-observable-ts");
$parcel$require("bff759400452e31cd08f2b9fa928f56a", "ts-invariant");
$parcel$require("bff759400452e31cd08f2b9fa928f56a", "tslib");
$parcel$require("bff759400452e31cd08f2b9fa928f56a", "apollo-utilities");
$parcel$require("bff759400452e31cd08f2b9fa928f56a", "apollo-utilities");
$bff759400452e31cd08f2b9fa928f56a$exports.Observable = $bff759400452e31cd08f2b9fa928f56a$import$Observable;
$bff759400452e31cd08f2b9fa928f56a$exports.getOperationName = $bff759400452e31cd08f2b9fa928f56a$import$getOperationName;

function $bff759400452e31cd08f2b9fa928f56a$var$validateOperation(operation) {
  var OPERATION_FIELDS = ['query', 'operationName', 'variables', 'extensions', 'context'];

  for (var _i = 0, _a = Object.keys(operation); _i < _a.length; _i++) {
    var key = _a[_i];

    if (OPERATION_FIELDS.indexOf(key) < 0) {
      throw "production" === "production" ? new $bff759400452e31cd08f2b9fa928f56a$import$InvariantError(2) : new $bff759400452e31cd08f2b9fa928f56a$import$InvariantError("illegal argument: " + key);
    }
  }

  return operation;
}

var $bff759400452e31cd08f2b9fa928f56a$var$LinkError = function (_super) {
  $bff759400452e31cd08f2b9fa928f56a$import$__extends(LinkError, _super);

  function LinkError(message, link) {
    var _this = _super.call(this, message) || this;

    _this.link = link;
    return _this;
  }

  return LinkError;
}(Error);

function $bff759400452e31cd08f2b9fa928f56a$var$isTerminating(link) {
  return link.request.length <= 1;
}

function $bff759400452e31cd08f2b9fa928f56a$export$toPromise(observable) {
  var completed = false;
  return new Promise(function (resolve, reject) {
    observable.subscribe({
      next: function (data) {
        if (completed) {
          "production" === "production" || $bff759400452e31cd08f2b9fa928f56a$import$invariant.warn("Promise Wrapper does not support multiple results from Observable");
        } else {
          completed = true;
          resolve(data);
        }
      },
      error: reject
    });
  });
}

var $bff759400452e31cd08f2b9fa928f56a$export$makePromise = $bff759400452e31cd08f2b9fa928f56a$export$toPromise;

function $bff759400452e31cd08f2b9fa928f56a$export$fromPromise(promise) {
  return new $bff759400452e31cd08f2b9fa928f56a$import$Observable(function (observer) {
    promise.then(function (value) {
      observer.next(value);
      observer.complete();
    }).catch(observer.error.bind(observer));
  });
}

function $bff759400452e31cd08f2b9fa928f56a$export$fromError(errorValue) {
  return new $bff759400452e31cd08f2b9fa928f56a$import$Observable(function (observer) {
    observer.error(errorValue);
  });
}

function $bff759400452e31cd08f2b9fa928f56a$var$transformOperation(operation) {
  var transformedOperation = {
    variables: operation.variables || {},
    extensions: operation.extensions || {},
    operationName: operation.operationName,
    query: operation.query
  };

  if (!transformedOperation.operationName) {
    transformedOperation.operationName = typeof transformedOperation.query !== 'string' ? $bff759400452e31cd08f2b9fa928f56a$import$getOperationName(transformedOperation.query) : '';
  }

  return transformedOperation;
}

function $bff759400452e31cd08f2b9fa928f56a$export$createOperation(starting, operation) {
  var context = $bff759400452e31cd08f2b9fa928f56a$import$__assign({}, starting);

  var setContext = function (next) {
    if (typeof next === 'function') {
      context = $bff759400452e31cd08f2b9fa928f56a$import$__assign({}, context, next(context));
    } else {
      context = $bff759400452e31cd08f2b9fa928f56a$import$__assign({}, context, next);
    }
  };

  var getContext = function () {
    return $bff759400452e31cd08f2b9fa928f56a$import$__assign({}, context);
  };

  Object.defineProperty(operation, 'setContext', {
    enumerable: false,
    value: setContext
  });
  Object.defineProperty(operation, 'getContext', {
    enumerable: false,
    value: getContext
  });
  Object.defineProperty(operation, 'toKey', {
    enumerable: false,
    value: function () {
      return $bff759400452e31cd08f2b9fa928f56a$var$getKey(operation);
    }
  });
  return operation;
}

function $bff759400452e31cd08f2b9fa928f56a$var$getKey(operation) {
  var query = operation.query,
      variables = operation.variables,
      operationName = operation.operationName;
  return JSON.stringify([operationName, query, variables]);
}

function $bff759400452e31cd08f2b9fa928f56a$var$passthrough(op, forward) {
  return forward ? forward(op) : $bff759400452e31cd08f2b9fa928f56a$import$Observable.of();
}

function $bff759400452e31cd08f2b9fa928f56a$var$toLink(handler) {
  return typeof handler === 'function' ? new $bff759400452e31cd08f2b9fa928f56a$export$ApolloLink(handler) : handler;
}

function $bff759400452e31cd08f2b9fa928f56a$export$empty() {
  return new $bff759400452e31cd08f2b9fa928f56a$export$ApolloLink(function () {
    return $bff759400452e31cd08f2b9fa928f56a$import$Observable.of();
  });
}

function $bff759400452e31cd08f2b9fa928f56a$export$from(links) {
  if (links.length === 0) return $bff759400452e31cd08f2b9fa928f56a$export$empty();
  return links.map($bff759400452e31cd08f2b9fa928f56a$var$toLink).reduce(function (x, y) {
    return x.concat(y);
  });
}

function $bff759400452e31cd08f2b9fa928f56a$export$split(test, left, right) {
  var leftLink = $bff759400452e31cd08f2b9fa928f56a$var$toLink(left);
  var rightLink = $bff759400452e31cd08f2b9fa928f56a$var$toLink(right || new $bff759400452e31cd08f2b9fa928f56a$export$ApolloLink($bff759400452e31cd08f2b9fa928f56a$var$passthrough));

  if ($bff759400452e31cd08f2b9fa928f56a$var$isTerminating(leftLink) && $bff759400452e31cd08f2b9fa928f56a$var$isTerminating(rightLink)) {
    return new $bff759400452e31cd08f2b9fa928f56a$export$ApolloLink(function (operation) {
      return test(operation) ? leftLink.request(operation) || $bff759400452e31cd08f2b9fa928f56a$import$Observable.of() : rightLink.request(operation) || $bff759400452e31cd08f2b9fa928f56a$import$Observable.of();
    });
  } else {
    return new $bff759400452e31cd08f2b9fa928f56a$export$ApolloLink(function (operation, forward) {
      return test(operation) ? leftLink.request(operation, forward) || $bff759400452e31cd08f2b9fa928f56a$import$Observable.of() : rightLink.request(operation, forward) || $bff759400452e31cd08f2b9fa928f56a$import$Observable.of();
    });
  }
}

var $bff759400452e31cd08f2b9fa928f56a$export$concat = function (first, second) {
  var firstLink = $bff759400452e31cd08f2b9fa928f56a$var$toLink(first);

  if ($bff759400452e31cd08f2b9fa928f56a$var$isTerminating(firstLink)) {
    "production" === "production" || $bff759400452e31cd08f2b9fa928f56a$import$invariant.warn(new $bff759400452e31cd08f2b9fa928f56a$var$LinkError("You are calling concat on a terminating link, which will have no effect", firstLink));
    return firstLink;
  }

  var nextLink = $bff759400452e31cd08f2b9fa928f56a$var$toLink(second);

  if ($bff759400452e31cd08f2b9fa928f56a$var$isTerminating(nextLink)) {
    return new $bff759400452e31cd08f2b9fa928f56a$export$ApolloLink(function (operation) {
      return firstLink.request(operation, function (op) {
        return nextLink.request(op) || $bff759400452e31cd08f2b9fa928f56a$import$Observable.of();
      }) || $bff759400452e31cd08f2b9fa928f56a$import$Observable.of();
    });
  } else {
    return new $bff759400452e31cd08f2b9fa928f56a$export$ApolloLink(function (operation, forward) {
      return firstLink.request(operation, function (op) {
        return nextLink.request(op, forward) || $bff759400452e31cd08f2b9fa928f56a$import$Observable.of();
      }) || $bff759400452e31cd08f2b9fa928f56a$import$Observable.of();
    });
  }
};

var $bff759400452e31cd08f2b9fa928f56a$export$ApolloLink = function () {
  function ApolloLink(request) {
    if (request) this.request = request;
  }

  ApolloLink.prototype.split = function (test, left, right) {
    return this.concat($bff759400452e31cd08f2b9fa928f56a$export$split(test, left, right || new ApolloLink($bff759400452e31cd08f2b9fa928f56a$var$passthrough)));
  };

  ApolloLink.prototype.concat = function (next) {
    return $bff759400452e31cd08f2b9fa928f56a$export$concat(this, next);
  };

  ApolloLink.prototype.request = function (operation, forward) {
    throw "production" === "production" ? new $bff759400452e31cd08f2b9fa928f56a$import$InvariantError(1) : new $bff759400452e31cd08f2b9fa928f56a$import$InvariantError('request is not implemented');
  };

  ApolloLink.empty = $bff759400452e31cd08f2b9fa928f56a$export$empty;
  ApolloLink.from = $bff759400452e31cd08f2b9fa928f56a$export$from;
  ApolloLink.split = $bff759400452e31cd08f2b9fa928f56a$export$split;
  ApolloLink.execute = $bff759400452e31cd08f2b9fa928f56a$export$execute;
  return ApolloLink;
}();

function $bff759400452e31cd08f2b9fa928f56a$export$execute(link, operation) {
  return link.request($bff759400452e31cd08f2b9fa928f56a$export$createOperation(operation.context, $bff759400452e31cd08f2b9fa928f56a$var$transformOperation($bff759400452e31cd08f2b9fa928f56a$var$validateOperation(operation)))) || $bff759400452e31cd08f2b9fa928f56a$import$Observable.of();
}

$bff759400452e31cd08f2b9fa928f56a$exports.toPromise = $bff759400452e31cd08f2b9fa928f56a$export$toPromise;
$bff759400452e31cd08f2b9fa928f56a$exports.split = $bff759400452e31cd08f2b9fa928f56a$export$split;
$bff759400452e31cd08f2b9fa928f56a$exports.makePromise = $bff759400452e31cd08f2b9fa928f56a$export$makePromise;
$bff759400452e31cd08f2b9fa928f56a$exports.fromPromise = $bff759400452e31cd08f2b9fa928f56a$export$fromPromise;
$bff759400452e31cd08f2b9fa928f56a$exports.fromError = $bff759400452e31cd08f2b9fa928f56a$export$fromError;
$bff759400452e31cd08f2b9fa928f56a$exports.from = $bff759400452e31cd08f2b9fa928f56a$export$from;
$bff759400452e31cd08f2b9fa928f56a$exports.execute = $bff759400452e31cd08f2b9fa928f56a$export$execute;
$bff759400452e31cd08f2b9fa928f56a$exports.empty = $bff759400452e31cd08f2b9fa928f56a$export$empty;
$bff759400452e31cd08f2b9fa928f56a$exports.createOperation = $bff759400452e31cd08f2b9fa928f56a$export$createOperation;
$bff759400452e31cd08f2b9fa928f56a$exports.concat = $bff759400452e31cd08f2b9fa928f56a$export$concat;
$bff759400452e31cd08f2b9fa928f56a$exports.ApolloLink = $bff759400452e31cd08f2b9fa928f56a$export$ApolloLink;