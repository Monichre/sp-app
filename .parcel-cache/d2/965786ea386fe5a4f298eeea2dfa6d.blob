var $e6da0889cd21a7ca754c17644332e140$exports = {};

/**
 * Naive, simple plugin to match inline nodes without attributes
 * This allows say <strong>foo</strong>, but not <strong class="very">foo</strong>
 * For proper HTML support, you'll want a different plugin
 **/
var $e6da0889cd21a7ca754c17644332e140$var$visit = $parcel$require("e6da0889cd21a7ca754c17644332e140", "unist-util-visit");
var $e6da0889cd21a7ca754c17644332e140$var$type = 'virtualHtml';
var $e6da0889cd21a7ca754c17644332e140$var$selfClosingRe = /^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\s*\/?>$/i;
var $e6da0889cd21a7ca754c17644332e140$var$simpleTagRe = /^<(\/?)([a-z]+)\s*>$/;

$e6da0889cd21a7ca754c17644332e140$exports = function (tree) {
  var open;
  var currentParent;
  $e6da0889cd21a7ca754c17644332e140$var$visit(tree, 'html', function (node, index, parent) {
    if (currentParent !== parent) {
      open = [];
      currentParent = parent;
    }

    var selfClosing = $e6da0889cd21a7ca754c17644332e140$var$getSelfClosing(node);

    if (selfClosing) {
      parent.children.splice(index, 1, {
        type: $e6da0889cd21a7ca754c17644332e140$var$type,
        tag: selfClosing,
        position: node.position
      });
      return true;
    }

    var current = $e6da0889cd21a7ca754c17644332e140$var$getSimpleTag(node, parent);

    if (!current) {
      return true;
    }

    var matching = $e6da0889cd21a7ca754c17644332e140$var$findAndPull(open, current.tag);

    if (matching) {
      parent.children.splice(index, 0, $e6da0889cd21a7ca754c17644332e140$var$virtual(current, matching, parent));
    } else if (!current.opening) {
      open.push(current);
    }

    return true;
  }, true // Iterate in reverse
  );
  return tree;
};

function $e6da0889cd21a7ca754c17644332e140$var$findAndPull(open, matchingTag) {
  var i = open.length;

  while (i--) {
    if (open[i].tag === matchingTag) {
      return open.splice(i, 1)[0];
    }
  }

  return false;
}

function $e6da0889cd21a7ca754c17644332e140$var$getSimpleTag(node, parent) {
  var match = node.value.match($e6da0889cd21a7ca754c17644332e140$var$simpleTagRe);
  return match ? {
    tag: match[2],
    opening: !match[1],
    node: node
  } : false;
}

function $e6da0889cd21a7ca754c17644332e140$var$getSelfClosing(node) {
  var match = node.value.match($e6da0889cd21a7ca754c17644332e140$var$selfClosingRe);
  return match ? match[1] : false;
}

function $e6da0889cd21a7ca754c17644332e140$var$virtual(fromNode, toNode, parent) {
  var fromIndex = parent.children.indexOf(fromNode.node);
  var toIndex = parent.children.indexOf(toNode.node);
  var extracted = parent.children.splice(fromIndex, toIndex - fromIndex + 1);
  var children = extracted.slice(1, -1);
  return {
    type: $e6da0889cd21a7ca754c17644332e140$var$type,
    children: children,
    tag: fromNode.tag,
    position: {
      start: fromNode.node.position.start,
      end: toNode.node.position.end,
      indent: []
    }
  };
}