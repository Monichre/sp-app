var $abacbae18b8368799ec753ceda8876b$exports = {};
var $abacbae18b8368799ec753ceda8876b$var$trim = $parcel$require("7abacbae18b8368799ec753ceda8876b", "trim");
var $abacbae18b8368799ec753ceda8876b$var$word = $parcel$require("7abacbae18b8368799ec753ceda8876b", "is-word-character");
var $abacbae18b8368799ec753ceda8876b$var$whitespace = $parcel$require("7abacbae18b8368799ec753ceda8876b", "is-whitespace-character");
var $abacbae18b8368799ec753ceda8876b$var$locate = $parcel$require("7abacbae18b8368799ec753ceda8876b", "../locate/emphasis");
$abacbae18b8368799ec753ceda8876b$exports = $abacbae18b8368799ec753ceda8876b$var$emphasis;
$abacbae18b8368799ec753ceda8876b$var$emphasis.locator = $abacbae18b8368799ec753ceda8876b$var$locate;
var $abacbae18b8368799ec753ceda8876b$var$C_ASTERISK = '*';
var $abacbae18b8368799ec753ceda8876b$var$C_UNDERSCORE = '_';

function $abacbae18b8368799ec753ceda8876b$var$emphasis(eat, value, silent) {
  var self = this;
  var index = 0;
  var character = value.charAt(index);
  var now;
  var pedantic;
  var marker;
  var queue;
  var subvalue;
  var length;
  var prev;

  if (character !== $abacbae18b8368799ec753ceda8876b$var$C_ASTERISK && character !== $abacbae18b8368799ec753ceda8876b$var$C_UNDERSCORE) {
    return;
  }

  pedantic = self.options.pedantic;
  subvalue = character;
  marker = character;
  length = value.length;
  index++;
  queue = '';
  character = '';

  if (pedantic && $abacbae18b8368799ec753ceda8876b$var$whitespace(value.charAt(index))) {
    return;
  }

  while (index < length) {
    prev = character;
    character = value.charAt(index);

    if (character === marker && (!pedantic || !$abacbae18b8368799ec753ceda8876b$var$whitespace(prev))) {
      character = value.charAt(++index);

      if (character !== marker) {
        if (!$abacbae18b8368799ec753ceda8876b$var$trim(queue) || prev === marker) {
          return;
        }

        if (!pedantic && marker === $abacbae18b8368799ec753ceda8876b$var$C_UNDERSCORE && $abacbae18b8368799ec753ceda8876b$var$word(character)) {
          queue += marker;
          continue;
        }
        /* istanbul ignore if - never used (yet) */


        if (silent) {
          return true;
        }

        now = eat.now();
        now.column++;
        now.offset++;
        return eat(subvalue + queue + marker)({
          type: 'emphasis',
          children: self.tokenizeInline(queue, now)
        });
      }

      queue += marker;
    }

    if (!pedantic && character === '\\') {
      queue += character;
      character = value.charAt(++index);
    }

    queue += character;
    index++;
  }
}